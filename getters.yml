target_default: none

packages:
  - scipiper

sources:
  - lib/src/require_local.R

targets:
  none:
    depends:

  #### 1_spatial ####

  1_crosswalk_fetch/in/UniversityofMissouri_2017_2020_Profiles.csv:
    command: gd_get('1_crosswalk_fetch/in/UniversityofMissouri_2017_2020_Profiles.csv.ind')

  1_crosswalk_fetch/in/Missouri_USACE_samplingLocations.xlsx:
    command: gd_get('1_crosswalk_fetch/in/Missouri_USACE_samplingLocations.xlsx.ind')

  1_crosswalk_fetch/in/Norfork_temperature_locations.csv:
    command: gd_get('1_crosswalk_fetch/in/Norfork_temperature_locations.csv.ind')

  1_crosswalk_fetch/in/Navico_lakes_depths.csv:
    command: gd_get('1_crosswalk_fetch/in/Navico_lakes_depths.csv.ind')

  1_crosswalk_fetch/in/Iowa_Lake_Locations.csv:
    command: gd_get('1_crosswalk_fetch/in/Iowa_Lake_Locations.csv.ind')

  1_crosswalk_fetch/out/Navico_lakes_depths_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/Navico_lakes_depths_sf.rds.ind')

  1_crosswalk_fetch/out/Norfork_temperature_locations_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/Norfork_temperature_locations_sf.rds.ind')

  1_crosswalk_fetch/out/UniversityofMissouri_2017_2020_Profiles_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/UniversityofMissouri_2017_2020_Profiles_sf.rds.ind')

  1_crosswalk_fetch/out/canonical_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/canonical_lakes_sf.rds.ind')

  1_crosswalk_fetch/out/us_counties_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/us_counties_sf.rds.ind')

  1_crosswalk_fetch/out/mndow_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/mndow_lakes_sf.rds.ind')

  1_crosswalk_fetch/out/winslow_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/winslow_lakes_sf.rds.ind')

  1_crosswalk_fetch/in/MGLP_lakes.zip:
    command: gd_get('1_crosswalk_fetch/in/MGLP_lakes.zip.ind')

  1_crosswalk_fetch/in/LAGOS_NE_All_Lakes_4ha.zip:
    command: gd_get('1_crosswalk_fetch/in/LAGOS_NE_All_Lakes_4ha.zip.ind')

  1_crosswalk_fetch/out/LAGOS_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/LAGOS_lakes_sf.rds.ind')

  1_crosswalk_fetch/out/MGLP_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/MGLP_lakes_sf.rds.ind')

  2_crosswalk_munge/out/Iowa_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/Iowa_nhdhr_xwalk.rds.ind')

  # see https://data-wi-dnr.opendata.arcgis.com/datasets/0128cce2c06342218725f1069031a4fa for WI hydrolayer
  1_crosswalk_fetch/out/wbic_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/wbic_lakes_sf.rds.ind')

  1_crosswalk_fetch/out/wqp_lake_temperature_sites_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/wqp_lake_temperature_sites_sf.rds.ind')

  1_crosswalk_fetch/out/wqp_lake_secchi_sites_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/wqp_lake_secchi_sites_sf.rds.ind')

  1_crosswalk_fetch/out/micorps_sites.xlsx:
    command: gd_get('1_crosswalk_fetch/out/micorps_sites.xlsx.ind')

  1_crosswalk_fetch/out/iadnr_contours_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/iadnr_contours_sf.rds.ind')

  1_crosswalk_fetch/out/iadnr_lakes_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/iadnr_lakes_sf.rds.ind')

  1_crosswalk_fetch/out/Iowa_lake_pts_sf.rds:
    command: gd_get('1_crosswalk_fetch/out/Iowa_lake_pts_sf.rds.ind')

  # Shapefile download available at https://www.nd.gov/gis/apps/Download/?clipping=Full&coord=LL83&format=SHAPE&layers=NDGAMEFISH.NDGF_LAKESVW
  # Before uploading, I edited the lake id column using: `mutate(LAKE = sprintf("ndgf_%s", LAKE)) %>% rename(site_id = LAKE)`
  # Note that the other NDGF resources have some lakes that do not appear in NDGF_LAKESVW
  #   NDGF_LAKE_CONTOURS has 16 that don't appear in LAKESVW
  #   NDGF_Lake_MaximumDepth has 22 that don't apepar in LAKESVW
  1_crosswalk_fetch/out/ndgf_lakesvw.rds:
    command: gd_get('1_crosswalk_fetch/out/ndgf_lakesvw.rds.ind')

  1_crosswalk_fetch/out/ned_centroid_elevations.feather:
    command: gd_get('1_crosswalk_fetch/out/ned_centroid_elevations.feather.ind')

  #### 2_crosswalk_munge ####
  2_crosswalk_munge/out/gnisname_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/gnisname_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/mglp_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/mglp_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/mglp_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/mglp_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/iadnr_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/iadnr_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/iadnr_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/iadnr_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/winslow_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/winslow_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/winslow_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/winslow_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/lagosne_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/lagosne_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/lagosne_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/lagosne_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/mndow_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/mndow_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/mndow_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/mndow_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/wbic_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/wbic_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/wbic_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/wbic_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/wqptemp_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/wqptemp_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/wqpsecchi_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/wqpsecchi_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/micorps_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/micorps_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/buffered_lakes_sf.rds:
    command: gd_get('2_crosswalk_munge/out/buffered_lakes_sf.rds.ind')

  2_crosswalk_munge/out/centroid_lakes_sf.rds:
    command: gd_get('2_crosswalk_munge/out/centroid_lakes_sf.rds.ind')

  2_crosswalk_munge/out/lake_to_state_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/lake_to_state_xwalk.rds.ind')

  2_crosswalk_munge/out/ndgf_nhdhr_intersect.rds:
    command: gd_get('2_crosswalk_munge/out/ndgf_nhdhr_intersect.rds.ind')

  2_crosswalk_munge/out/ndgf_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/ndgf_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/mo_usace_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/mo_usace_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/navico_lakes_sf.rds:
    command: gd_get('2_crosswalk_munge/out/navico_lakes_sf.rds.ind')

  2_crosswalk_munge/out/navico_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/navico_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/norfork_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/norfork_nhdhr_xwalk.rds.ind')

  2_crosswalk_munge/out/univ_mo_nhdhr_xwalk.rds:
    command: gd_get('2_crosswalk_munge/out/univ_mo_nhdhr_xwalk.rds.ind')

  #### 3_params_fetch #####

  3_params_fetch/in/USGS_Kd_Predictions_byNHDHR.zip:
    command: gd_get('3_params_fetch/in/USGS_Kd_Predictions_byNHDHR.zip.ind')

  3_params_fetch/in/mi_hypsography_mglpid.csv:
    command: gd_get('3_params_fetch/in/mi_hypsography_mglpid.csv.ind')

  3_params_fetch/in/nlcd_2011_landcover_2011_edition_2014_10_10.zip:
    command: gd_get('3_params_fetch/in/nlcd_2011_landcover_2011_edition_2014_10_10.zip.ind')

  3_params_fetch/out/nlcd_classes.rds:
    command: gd_get('3_params_fetch/out/nlcd_classes.rds.ind')
  3_params_fetch/in/WI_Waterbodies.tsv:
    command: gd_get('3_params_fetch/in/WI_Waterbodies.tsv.ind')

  3_params_fetch/in/mndow_percentage_hypsos.zip:
    command: gd_get('3_params_fetch/in/mndow_percentage_hypsos.zip.ind')

  3_params_fetch/in/mndow_percentage_02_hypsos.zip:
    command: gd_get('3_params_fetch/in/mndow_percentage_02_hypsos.zip.ind')

  3_params_fetch/in/mndow_hypsos_m-20191024.zip:
    command: gd_get('3_params_fetch/in/mndow_hypsos_m-20191024.zip.ind')

  3_params_fetch/in/new2_mndow_hypsos_m.zip:
    command: gd_get('3_params_fetch/in/new2_mndow_hypsos_m.zip.ind')

  3_params_fetch/in/WBIC_hypsos_lakeattributes.zip:
    command: gd_get('3_params_fetch/in/WBIC_hypsos_lakeattributes.zip.ind')

  3_params_fetch/out/IA_lakes_bathymetry.zip:
    command: gd_get('3_params_fetch/out/IA_lakes_bathymetry.zip.ind')

  3_params_fetch/out/IN_lakes_bathymetry.zip:
    command: gd_get('3_params_fetch/out/IN_lakes_bathymetry.zip.ind')

  3_params_fetch/out/LAGOS_NE_depths.csv:
    command: gd_get('3_params_fetch/out/LAGOS_NE_depths.csv.ind')

  3_params_fetch/out/LAGOS_NE_secchi.csv:
    command: gd_get('3_params_fetch/out/LAGOS_NE_secchi.csv.ind')

  3_params_fetch/in/Data_MGLP_TDOx_Models.csv:
    command: gd_get('3_params_fetch/in/Data_MGLP_TDOx_Models.csv.ind')

  3_params_fetch/out/nlcd_classes_canopyheight.rds:
    command: gd_get('3_params_fetch/out/nlcd_classes.rds.ind')

  3_params_fetch/out/DRB_reservoirs_bathymetry.rds:
    command: gd_get('3_params_fetch/out/DRB_reservoirs_bathymetry.rds.ind')

  # Shapefile download available at https://www.nd.gov/gis/apps/Download/?clipping=Full&coord=LL83&format=SHAPE&layers=NDGAMEFISH.LAKE_CONTOURS
  3_params_fetch/out/ndgf_lake_contours.rds:
    command: gd_get('3_params_fetch/out/ndgf_lake_contours.rds.ind')

  # Shapefile download available at https://www.nd.gov/gis/apps/Download/?clipping=Full&coord=LL83&format=SHAPE&layers=NDGAMEFISH.LAKE_MAXIMUMDEPTH
  3_params_fetch/out/ndgf_lake_maxdepth.rds:
    command: gd_get('3_params_fetch/out/ndgf_lake_maxdepth.rds.ind')

  #### 4_params_munge ####
  4_params_munge/out/NY_manual_depths.rds:
    command: gd_get('4_params_munge/out/NY_manual_depths.rds.ind')

  4_params_munge/out/MO_manual_depths.rds:
    command: gd_get('4_params_munge/out/MO_manual_depths.rds.ind')

  4_params_munge/out/DRB_reservoirs_bathy.rds:
    command: gd_get('4_params_munge/out/DRB_reservoirs_bathy.rds.ind')

  4_params_munge/out/toha_varying_kw.rds:
    command: gd_get('4_params_munge/out/toha_varying_kw.rds.ind')

  4_params_munge/out/nlcd_2011_buffers.rds:
    command: gd_get('4_params_munge/out/nlcd_2011_buffers.rds.ind')

  4_params_munge/out/mglp_depths.rds:
    command: gd_get('4_params_munge/out/mglp_depths.rds.ind')

  4_params_munge/out/navico_depths.rds:
    command: gd_get('4_params_munge/out/navico_depths.rds.ind')

  4_params_munge/out/lagos_secchi.rds:
    command: gd_get('4_params_munge/out/lagos_secchi.rds.ind')

  4_params_munge/out/lagos_depths.rds:
    command: gd_get('4_params_munge/out/lagos_depths.rds.ind')

  4_params_munge/out/wbic_depths.rds:
    command: gd_get('4_params_munge/out/wbic_depths.rds.ind')

  4_params_munge/out/ndgf_depths.rds:
    command: gd_get('4_params_munge/out/ndgf_depths.rds.ind')

  4_params_munge/out/mglp_mi_perc_bathy.rds:
    command: gd_get('4_params_munge/out/mglp_mi_perc_bathy.rds.ind')

  4_params_munge/out/mndow_perc_bathy.rds:
    command: gd_get('4_params_munge/out/mndow_perc_bathy.rds.ind')

  4_params_munge/out/mndow_perc_02_bathy.rds:
    command: gd_get('4_params_munge/out/mndow_perc_02_bathy.rds.ind')

  4_params_munge/out/iadnr_bathy.rds:
    command: gd_get('4_params_munge/out/iadnr_bathy.rds.ind')

  4_params_munge/out/indnr_bathy.rds:
    command: gd_get('4_params_munge/out/indnr_bathy.rds.ind')

  4_params_munge/out/mndow_01_bathy.rds:
    command: gd_get('4_params_munge/out/mndow_01_bathy.rds.ind')

  4_params_munge/out/mndow_02_bathy.rds:
    command: gd_get('4_params_munge/out/mndow_02_bathy.rds.ind')

  4_params_munge/out/wbic_bathy.rds:
    command: gd_get('4_params_munge/out/wbic_bathy.rds.ind')

  4_params_munge/out/ndgf_bathy.rds:
    command: gd_get('4_params_munge/out/ndgf_bathy.rds.ind')

  #### 6_wqp_fetch ####
  6_wqp_fetch/inout/wqptemp_partitions.feather:
    command: gd_get('6_wqp_fetch/inout/wqptemp_partitions.feather.ind')

  6_wqp_fetch/inout/wqpsecchi_partitions.feather:
    command: gd_get('6_wqp_fetch/inout/wqpsecchi_partitions.feather.ind')

  6_wqp_fetch/out/wqp_temperature_data.rds:
    command: gd_get('6_wqp_fetch/out/wqp_temperature_data.rds.ind')

  6_wqp_fetch/out/wqp_secchi_data.rds:
    command: gd_get('6_wqp_fetch/out/wqp_secchi_data.rds.ind')

  #### 6_nwis_fetch ####
  6_nwis_fetch/out/drb_reservoirs_waterlevel.rds:
    command: gd_get('6_nwis_fetch/out/drb_reservoirs_waterlevel.rds.ind')

  6_nwis_fetch/out/drb_reservoirs_temps.rds:
    command: gd_get('6_nwis_fetch/out/drb_reservoirs_temps.rds.ind')

  #### 7_config_merge ####

  7_drivers_munge/out/cell_group_table.rds:
    command: gd_get('7_drivers_munge/out/cell_group_table.rds.ind')

  7_drivers_munge/out/7_all_local_drivers.rds:
    command: gd_get('7_drivers_munge/out/7_all_local_drivers.rds.ind')

  7_config_merge/out/canonical_lakes_area.rds:
    command: gd_get('7_config_merge/out/canonical_lakes_area.rds.ind')

  7_config_merge/out/nml_cd_values.rds:
    command: gd_get('7_config_merge/out/nml_cd_values.rds.ind')

  7_config_merge/out/nml_lat_lon_values.rds:
    command: gd_get('7_config_merge/out/nml_lat_lon_values.rds.ind')

  7_config_merge/out/nml_H_A_values.rds:
    command: gd_get('7_config_merge/out/nml_H_A_values.rds.ind')

  7_config_merge/out/nml_len_wid_values.rds:
    command: gd_get('7_config_merge/out/nml_len_wid_values.rds.ind')

  7_config_merge/out/nml_lake_depth_values.rds:
    command: gd_get('7_config_merge/out/nml_lake_depth_values.rds.ind')

  7_config_merge/out/nml_layer_thick_values.rds:
    command: gd_get('7_config_merge/out/nml_layer_thick_values.rds.ind')

  7_config_merge/out/nml_meteo_fl_values.rds:
    command: gd_get('7_config_merge/out/nml_meteo_fl_values.rds.ind')

  7_config_merge/out/nml_Kw_values.rds:
    command: gd_get('7_config_merge/out/nml_Kw_values.rds.ind')

  7_config_merge/out/nml_list.rds:
    command: gd_get('7_config_merge/out/nml_list.rds.ind')

  #### 7_munge ####
  7a_nwis_munge/out/drb_reservoirs_temp_munged.rds:
    command: gd_get('7a_nwis_munge/out/drb_reservoirs_temp_munged.rds.ind')

  7a_nwis_munge/out/drb_reservoirs_waterlevels_munged.rds:
    command: gd_get('7a_nwis_munge/out/drb_reservoirs_waterlevels_munged.rds.ind')

  7a_nwis_munge/in/NYC_DEP_reservoir_data.xlsx:
    command: gd_get('7a_nwis_munge/in/NYC_DEP_reservoir_data.xlsx.ind')

  7a_nwis_munge/out/NYC_DEP_reservoir_temperature_data.rds:
    command: gd_get('7a_nwis_munge/out/NYC_DEP_reservoir_temperature_data.rds.ind')

  7a_nwis_munge/out/NYC_DEP_reservoir_waterlevels.rds:
    command: gd_get('7a_nwis_munge/out/NYC_DEP_reservoir_waterlevels.rds.ind')

  7a_wqp_munge/out/temp_wqp_munged.feather:
    command: gd_get('7a_wqp_munge/out/temp_wqp_munged.feather.ind')

  7a_wqp_munge/out/secchi_wqp_munged.feather:
    command: gd_get('7a_wqp_munge/out/secchi_wqp_munged.feather.ind')

  7a_wqp_munge/out/temp_wqp_munged_linked.feather:
    command: gd_get('7a_wqp_munge/out/temp_wqp_munged_linked.feather.ind')

  7a_wqp_munge/out/secchi_wqp_munged_linked.feather:
    command: gd_get('7a_wqp_munge/out/secchi_wqp_munged_linked.feather.ind')

  7a_temp_coop_munge/out/all_coop_dat_linked.feather:
    command: gd_get('7a_temp_coop_munge/out/all_coop_dat_linked.feather.ind')

  7b_temp_merge/out/merged_temp_data_alltimes.feather:
    command: gd_get('7b_temp_merge/out/merged_temp_data_alltimes.feather.ind')

  7b_temp_merge/out/merged_temp_data_daily.feather:
    command: gd_get('7b_temp_merge/out/merged_temp_data_daily.feather.ind')

  # this seems brittle - why aren't we using an indicator/cache pair?
  7b_temp_merge/in/source_metadata.csv:
    command: require_local('7b_temp_merge/in/source_metadata.csv.ind')

  7b_temp_merge/out/temp_data_with_sources.feather:
    command: gd_get('7b_temp_merge/out/temp_data_with_sources.feather.ind')

  7b_temp_merge/out/source_metadata_for_release.csv:
    command: gd_get('7b_temp_merge/out/source_metadata_for_release.csv.ind')

  7b_temp_merge/out/drb_daily_reservoir_temps.rds:
    command: gd_get('7b_temp_merge/out/drb_daily_reservoir_temps.rds.ind')

  #### 8_viz ####
  # List from Holly of WI lakes that are having hypsos digitized
  # I xwalked to nhd ids (using "2_crosswalk_munge/out/wbic_nhdhr_xwalk.rds")
  # Then I uloaded file to GD and then ran a gd_confirm_posted
  # The resulting RDS file is used in the summary step
  8_viz/in/WI_hypso_list.rds:
    command: gd_get("8_viz/in/WI_hypso_list.rds.ind")

  8_viz/inout/lakes_summary.feather:
    command: gd_get('8_viz/inout/lakes_summary.feather.ind')

  8_viz/out/lakes_summary_fig.html:
    command: gd_get('8_viz/out/lakes_summary_fig.html.ind')

    ##### Adding summary and visual of data that we are thinking of using for TOHA

  # These datasets help visualize and summarize the data we are using for TOHA models.
  # They were downloaded from here: https://drive.google.com/drive/u/4/folders/13w3QDXicjHVymVW1NeyJpJqVRZ7KvlTD
  # Then uploaded to this pipeline GD folder & then incorporated into the pipeline using `gd_confirm_posted`.
  8_viz/in/WAE_numYears_meanCPUE.csv:
    command: gd_get("8_viz/in/WAE_numYears_meanCPUE.csv.ind")
  8_viz/in/JakeWalsh_NHDIDs.csv:
    command: gd_get("8_viz/in/JakeWalsh_NHDIDs.csv.ind")

  8_viz/inout/summary_toha_sf.rds:
    command: gd_get('8_viz/inout/summary_toha_sf.rds.ind')

  8_viz/out/toha_lakes_summary_fig.html:
    command: gd_get('8_viz/out/toha_lakes_summary_fig.html.ind')


